<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<app-nav-bar></app-nav-bar>

<ng-template #content let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Added a new recipe</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>

  <div class="modal-body">
    <form *ngIf="recipeForm" [formGroup]="recipeForm" class="row g-3">
      <div class="col-md-6">
        <label for="inputName" class="form-label">The name of the recipe<span class="text-danger">*</span></label>
        <input type="text" class="form-control" id="inputName" formControlName="name">
      </div>





      <div class="col-md-4">
        <label for="inputCategory" class="form-label">Category</label>
        <select id="inputCategory" class="form-select" formControlName="category">
          <option value="" disabled selected>Choose a category...</option>
          <!-- <option *ngFor="let category of categoryList" [value]="category.id">{{ category.name }}</option> -->
          <option *ngFor="let category of categoryList">{{category.name}}</option>

        </select>
      </div>

      <div class="col-md-6">
        <label for="inputPreparationTime" class="form-label">Preparation Time (minutes)</label>
        <input type="number" class="form-control" id="inputPreparationTime" formControlName="preparation_time">
      </div>



      <div class="col-md-6">
        <label for="inputPreparationTime" class="form-label">Level of difficulty </label>
        <div>
          <ngb-rating [(rate)]="rating" [max]="5"></ngb-rating>
        </div>
      </div>


      <div formArrayName="ingredients">
        <div *ngFor="let ingredient of ingredientsArray.controls; let i = index">
          <div class="form-group">
            <label>Ingredient {{ i + 1 }}</label>
            <input type="text" class="form-control" formControlName="{{ i }}" (input)="onIngredientValueChanged(i)">
          </div>
        </div>
      </div>
      <button
        *ngIf="ingredientsArray.controls.length === 0 || ingredientsArray.controls[ingredientsArray.controls.length - 1].value !== ''"
        (click)="addIngredientField()" class="btn btn-primary">Add Another Ingredient</button>

      <div formArrayName="instructions">
        <div *ngFor="let instruction of instructionsArray.controls; let i = index">
          <div class="form-group">
            <label>instruction {{ i + 1 }}</label>
            <input type="text" class="form-control" formControlName="{{ i }}" (input)="onInstructionsValueChanged(i)">
          </div>
        </div>
      </div>
      <button
        *ngIf="instructionsArray.controls.length === 0 || instructionsArray.controls[instructionsArray.controls.length - 1].value !== ''"
        (click)="addInstructionField()" class="btn btn-primary">Add Another instruction</button>


      <div class="col-md-6">
        <label for="inputUserId" class="form-label">User ID<span class="text-danger">*</span></label>
        <input type="text" class="form-control" id="inputUserId" formControlName="userId">
      </div>

      <div class="col-md-6">
        <label for="inputRoutingImage" class="form-label">Routing Image</label>
        <input type="text" class="form-control" id="inputRoutingImage" formControlName="routingImage">
      </div>

    </form>
  </div>

  <div class="modal-footer">
    <button type="button" class="btn btn-outline-dark" (click)="saveRecipe()">Save</button>
  </div>

</ng-template>
<div class="text">
<h1>הוספת מתכון חדש</h1>
<p>ברוך הבא לעמוד הוספת מתכון חדש! כאן תוכל לשתף את המתכון המועדף עליך עם קהל הגולשים.</p>

<p>על מנת להוסיף מתכון חדש, יש למלא את כל הפרטים הנדרשים בטופס שמוצג למטה. כל השדות המסומנים בכוכבית (*) הינם שדות חובה למילוי.</p>

<p>קפוץ ישירות לפעולת ההוספה על ידי לחיצה על כפתור "הוספת מתכון" המופיע למעלה.</p>

<p>אם יש לך שאלות או בעיות, אל תהסס לפנות אלינו ונשמח לעזור לך!</p>

<button class="btn btn-lg btn-outline-primary" (click)="open(content)">הוספת מתכון</button>
</div>
<hr />
<pre>{{ closeResult }}</pre>
<app-footer>